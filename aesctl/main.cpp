#include <cstdio>
#include <cstdlib>
#include <ctime>

#include <aes.h>
#include <gflags/gflags.h>

DEFINE_bool(big_menu, true, "Include 'advanced' options in the menu listing");
DEFINE_string(languages, "english,french,german","comma-separated list of languages to offer in the 'lang' menu");

int main(int argc, char *argv[]) {
//    state_t state;
/*
    // This is major-column order matrix
    state_t state = {0x63, 0x2F, 0xAF, 0xA2,
                     0xEB, 0x93, 0xC7, 0x20,
                     0x9F, 0x92, 0xAB, 0xCB,
                     0xA0, 0xC0, 0x30, 0x2B};
*/

    state_t state = {0x61, 0x62, 0x63, 0x64, 0x65, 0x66, 0x67, 0x68, 0x69, 0x6A, 0x6B, 0x6C, 0x6D, 0x6E, 0x6F, 0x70};
//    state_t state = {0x32, 0x43, 0xF6, 0xA8, 0x88, 0x5A, 0x30, 0x8D, 0x31, 0x31, 0x98, 0xA2, 0xE0, 0x37, 0x07, 0x34};

    printf("Hello, World!\n");

    //char *plaintext = "This string is secret!";
    uint8_t plaintext[] = "abcdefghijklmnop";

    // Generate Key
    uint8_t key[] = {0x61, 0x62, 0x63, 0x64, 0x65, 0x66, 0x67, 0x68, 0x69, 0x6A, 0x6B, 0x6C, 0x6D, 0x6E, 0x6F, 0x70};
//    uint8_t key[] = {0x54, 0x68, 0x61, 0x74, 0x73, 0x20, 0x6D, 0x79, 0x20, 0x4B, 0x75, 0x6e, 0x67, 0x20, 0x46, 0x75};
//    uint8_t key[] = {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f};
//    uint8_t key[] = {0x2B, 0x7E, 0x15 , 0x16, 0x28, 0xAE, 0xD2, 0xA6, 0xAB, 0xF7, 0x15, 0x88, 0x09, 0xCF, 0x4F, 0x3C};

    //srand(time(NULL));

    for (int i = 0; i < Nb * Nk; i += 4) {
//        state[i] = plaintext[i];

/*
            uint8_t index = (1 << (sizeof(c) * 8 - 1));
            for (; index; index >>= 1)
                printf("%d", (c & index) != 0);
            printf(" - %c\n", c);
*/
    }

    Debug("Text:", state, Nb * Nk);
    Debug("Key:", key, Nb * Nk);

    Cipher(&state, key);

    // Result!
    Debug("Rslt:", state, Nb * Nk);

    return 0;
}